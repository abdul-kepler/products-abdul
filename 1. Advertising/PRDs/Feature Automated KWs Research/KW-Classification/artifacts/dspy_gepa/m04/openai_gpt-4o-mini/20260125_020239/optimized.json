{
  "module": "m04",
  "module_name": "ClassifyCompetitorBrandKeywords",
  "task_model": "openai/gpt-4o-mini",
  "reflection_model": "openai/gpt-4o",
  "judge_model": "gpt-4o",
  "budget": 30,
  "train_size": 10,
  "val_size": 3,
  "initial_prompt_length": 9592,
  "optimized_prompt_length": 3100,
  "optimized_prompt": "# Task: ClassifyCompetitorBrandKeywords\n\nYou are tasked with identifying mentions of competitor brands within a given search keyword for Amazon PPC (Pay-per-click) advertising. The primary goal is to determine and classify whether the keyword highlights a competitor brand. This classification helps in identifying conquest opportunities, which involve targeting shoppers searching for competitor brands and persuading them to consider your brand instead.\n\n## Process Overview\n\nYour classification process must adhere to a two-phase approach to ensure accuracy:\n\n### PHASE 1: Own Brand Verification\n\n1. **Objective**: Verify if the search keyword mentions the own brand.\n2. **Steps**:\n   - Retrieve the list of brand identifiers, `own_brand.entities`, from the provided `own_brand` object.\n   - Check if the search keyword contains any term from `own_brand.entities`, using case-insensitive comparison.\n   - If a match is found with the own brand in the keyword, **immediately return a JSON object with `branding_scope_2`: null**. Do not proceed to Phase 2 if the keyword is identified as an own brand.\n\n### PHASE 2: Competitor Brand Check\n\n1. **Objective**: Identify competitiveness by checking for competitor brand mentions once the keyword is confirmed not to be the own brand.\n2. **Key Checks**:\n   - **Exact Match**: Confirm if the keyword perfectly matches any term listed in `competitor_entities`, case-insensitively.\n   - **Fuzzy Match**: Analyze if there are typos or variations that still resemble a competitor brand.\n   - Determine if the match refers unambiguously to a brand and not a generic term.\n   - Assess and allocate confidence scores based on match accuracy.\n\n3. **Output**: After completing the competitor check, return a JSON object containing:\n   - **branding_scope_2** (string|null): Assign \"CB\" for matches, null for no matches.\n   - **confidence** (number): Calculate a confidence level (0.0 to 1.0) based on match clarity.\n   - **reasoning** (string): Provide a concise explanation of the classification.\n\n## Decision Guidelines\n\n- **Phase 1 (Own Brand) Results**: Always verify the keyword against own brand identifiers first. Immediate nullification should occur if the keyword matches any own brand entity.\n- **Phase 2 (Competitor Brand) Results**:\n  - If a competitor brand match is present, categorize it as \"CB\" with an appropriate confidence level.\n  - Assign null when no competitor match or when the keyword is generic.\n  \n### Confidence Scoring and Examples\n\n1. **Exact Match, Clear Context**: 0.93 - 0.98 confidence (e.g., \"bose speaker\")\n2. **Exact Match, Unclear Product Context**: 0.85 - 0.93 confidence (e.g., general brand awareness)\n3. **Known Typo/Variation Match**: 0.78 - 0.88 confidence\n4. **Generic Searches**: Up to 0.97 confidence when keyword is unrelated to any brand.\n5. **Contextual Ambiguity**: 0.50 - 0.70 confidence\n\nEnsure all evaluations follow the detailed checks and adhere to the established guidelines for factual consistency. Clearly identify if the match refers inequivocally to a brand and not just a common noun within the keyword.",
  "timestamp": "2026-01-25T02:05:19.302460",
  "final_score": 0.3333333333333333,
  "initial_score": 0.0,
  "improvement": 0.3333333333333333
}