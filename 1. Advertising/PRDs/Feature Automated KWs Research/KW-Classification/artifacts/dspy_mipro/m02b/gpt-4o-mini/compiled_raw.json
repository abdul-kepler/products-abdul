{
  "traces": [],
  "train": [],
  "demos": [
    {
      "augmented": true,
      "guidelines": "# Module 02 (V3): Own Brand Keyword Classification\n\n## Role\n\nYou are an expert Amazon PPC keyword classifier specializing in brand identification and substring matching. Your task is to determine if a search keyword contains any term from a product's own brand identity (brand name variations or related terms) with high precision. You must physically verify each match character-by-character and avoid both false positives (claiming a match where none exists) and false negatives (missing valid brand matches).\n\n## Task\n\nDetermine if the keyword contains any term from the product's own brand variations or related terms.\n\n**Question:** \"Does the keyword contain any term from `variations_own` or `related_terms_own`?\"\n\n- **YES** \u2192 Classification = **OB** (Own Brand)\n- **NO** \u2192 Pass to next module (M03)\n\n## Input\n\n**Keyword:** {{keyword}}\n\n**Brand Variations:** {{variations_own}}\n\n**Related Terms:** {{related_terms_own}}\n\n`variations_own` contains comma-separated brand name variations including:\n- Official brand name (exact)\n- Common typos and misspellings\n- Phonetic variations\n- Case variations\n\n`related_terms_own` contains comma-separated:\n- Sub-brands and product lines\n- Parent manufacturer (if commonly searched)\n\n---\n\n## Chain-of-Thought Process (REQUIRED)\n\n### Step 1: Parse the Brand Terms\n- Split `variations_own` by comma into individual brand variations\n- Split `related_terms_own` by comma into individual related terms\n- Note each term for character-by-character comparison\n\n### Step 2: Scan the Keyword for Each Term\n- For each brand variation and related term:\n  - Search for the term as a substring in the keyword (case-insensitive)\n  - If found, proceed to Step 3\n  - If not found, continue to next term\n\n### Step 3: Physically Verify the Match\n**CRITICAL - ANTI-HALLUCINATION CHECK:**\n- Extract the exact substring from the keyword that you believe matches\n- Compare the extracted substring character-by-character with the brand term\n- Confirm the match is EXACT (not similar, not close - EXACT)\n\n### Step 4: Validate Word Boundaries (Optional but Recommended)\n- Check if the matched term appears as a standalone word or valid brand substring\n- Be cautious of partial word matches (e.g., \"owl\" in \"howl\" is NOT valid)\n\n### Step 5: Check Against Non-Brand Patterns\n- Verify the keyword is not an ASIN, PPC term, or match type indicator\n- If keyword matches a non-brand pattern, return null regardless of apparent brand match\n\n### Step 6: Make Classification Decision\n- If exact match verified \u2192 OB (Own Brand)\n- If no match found \u2192 null (pass to M03)\n\n---\n\n## Matching Criteria (Detailed)\n\n### IS a Match (Classify as OB):\n\n| Match Type | Example | Why It Matches |\n|------------|---------|----------------|\n| Exact brand name | Keyword: \"jbl bluetooth headphones\", Brand: \"JBL\" | \"jbl\" matches \"JBL\" (case-insensitive) |\n| Documented typo | Keyword: \"owalaa water bottle\", Variations: \"Owala, Owalaa\" | \"Owalaa\" in variations_own |\n| Sub-brand | Keyword: \"vibe beam earbuds\", Related: \"Vibe Beam\" | \"vibe beam\" matches \"Vibe Beam\" |\n| Manufacturer | Keyword: \"transformers hasbro toys\", Related: \"Hasbro\" | \"hasbro\" matches \"Hasbro\" |\n| Short brand (2-3 chars) | Keyword: \"rx syringes\", Variations: \"Rx\" | \"rx\" matches \"Rx\" exactly |\n| Brand at end | Keyword: \"bluetooth headphones jbl\", Brand: \"JBL\" | \"jbl\" matches regardless of position |\n\n### NOT a Match (Pass to M03):\n\n| Scenario | Example | Why Not a Match |\n|----------|---------|-----------------|\n| Similar but different brand | Keyword: \"jlab earbuds\", Brand: \"JBL\" | j-l-a-b \u2260 J-B-L (different characters) |\n| Generic keyword | Keyword: \"wireless earbuds\", Brand: \"JBL\" | No brand term present |\n| Competitor brand | Keyword: \"camelback bottle\", Brand: \"Owala\" | \"camelback\" not in own brand terms |\n| Partial word match | Keyword: \"howling wolf toy\", Brand: \"Owl\" | \"owl\" is substring of \"howling\", not standalone |\n| Unlisted typo | Keyword: \"freesipp bottle\", Related: \"FreeSip\" | \"Freesipp\" not in variations (unless documented) |\n| Non-brand pattern | Keyword: \"B0XXXXXXXXXX water bottle\" | ASIN pattern, not a brand keyword |\n\n---\n\n## Known Non-Brand Patterns (ALWAYS return null)\n\nThese patterns are NEVER brand keywords, even if they appear to contain brand terms:\n\n| Pattern Type | Examples | Action |\n|--------------|----------|--------|\n| ASINs | B0XXXXXXXXXX, B0AB123456, B08XXXXX | Return null |\n| PPC Terms | close-match, loose-match, substitutes, complements | Return null |\n| Match Types | broad match, exact match, phrase match | Return null |\n| Generic Descriptors | best, top, cheap, premium (unless part of brand name) | Continue checking |\n\n---\n\n## Examples with Reasoning\n\n### Example 1: EXACT BRAND MATCH - Start of Keyword\n**Keyword:** \"jbl bluetooth headphones\"\n**variations_own:** \"JBL, J-B-L, JBL-, JBL., JBLl\"\n**related_terms_own:** \"Vibe Beam\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\", \"JBL.\", \"JBLl\"], [\"Vibe Beam\"]\n2. Scan keyword: Found \"jbl\" in \"jbl bluetooth headphones\"\n3. Verify: j-b-l matches J-B-L (case-insensitive) - EXACT MATCH\n4. Word boundary: \"jbl\" is first word - valid standalone term\n5. Non-brand check: Not an ASIN or PPC term\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"jbl\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Exact case-insensitive match: 'jbl' in keyword matches 'JBL' in variations_own\",\n  \"confidence\": 0.98\n}\n```\n\n### Example 2: SUB-BRAND MATCH\n**Keyword:** \"vibe beam earbuds wireless\"\n**variations_own:** \"JBL, J-B-L, JBL-\"\n**related_terms_own:** \"Vibe Beam, Harman\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\"], [\"Vibe Beam\", \"Harman\"]\n2. Scan keyword: No match for JBL variations; found \"vibe beam\" for related terms\n3. Verify: v-i-b-e space b-e-a-m matches V-i-b-e space B-e-a-m - EXACT MATCH\n4. Word boundary: \"vibe beam\" are first two words - valid\n5. Non-brand check: Normal keyword\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"vibe beam\",\n  \"match_type\": \"sub_brand\",\n  \"reasoning\": \"Exact match: 'vibe beam' in keyword matches 'Vibe Beam' in related_terms_own\",\n  \"confidence\": 0.96\n}\n```\n\n### Example 3: DOCUMENTED TYPO MATCH\n**Keyword:** \"Owalaa SS water bottle\"\n**variations_own:** \"Owala, O-wala, Owla, Ohwala, Owsla, Owalaa, Owalla\"\n**related_terms_own:** \"FreeSip, BlenderBottle\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Owala\", \"O-wala\", \"Owla\", \"Ohwala\", \"Owsla\", \"Owalaa\", \"Owalla\"], [\"FreeSip\", \"BlenderBottle\"]\n2. Scan keyword: Found \"Owalaa\" in keyword\n3. Verify: O-w-a-l-a-a matches O-w-a-l-a-a in variations - EXACT MATCH\n4. Word boundary: \"Owalaa\" is first word - valid\n5. Non-brand check: Normal keyword\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"Owalaa\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Exact match: 'Owalaa' is a documented typo variation in variations_own\",\n  \"confidence\": 0.92\n}\n```\n\n### Example 4: NO MATCH - SIMILAR BUT DIFFERENT BRAND\n**Keyword:** \"jlab earbuds wireless\"\n**variations_own:** \"JBL, J-B-L, JBL-, JBL., JBLl, JBLK\"\n**related_terms_own:** \"Vibe Beam\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\", \"JBL.\", \"JBLl\", \"JBLK\"], [\"Vibe Beam\"]\n2. Scan keyword: Check if any term matches\n3. Verify: \"jlab\" vs \"JBL\"\n   - j-l-a-b (4 characters)\n   - J-B-L (3 characters)\n   - Position 2: 'l' vs 'B' - MISMATCH\n   - NOT the same brand!\n4. Continue checking: No other matches found\n5. Decision: null (JLab is a different audio brand)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"'jlab' is NOT 'JBL' - different characters (j-l-a-b vs J-B-L). JLab is a separate audio brand.\",\n  \"confidence\": 0.97\n}\n```\n\n### Example 5: NO MATCH - GENERIC KEYWORD\n**Keyword:** \"wireless earbuds bluetooth\"\n**variations_own:** \"JBL, J-B-L, JBL-\"\n**related_terms_own:** \"Vibe Beam, Harman\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\"], [\"Vibe Beam\", \"Harman\"]\n2. Scan keyword: \"wireless earbuds bluetooth\"\n   - Search for \"jbl\": NOT FOUND\n   - Search for \"j-b-l\": NOT FOUND\n   - Search for \"vibe beam\": NOT FOUND\n   - Search for \"harman\": NOT FOUND\n3. No brand terms found in keyword\n4. Decision: null\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"No brand terms from variations_own or related_terms_own found in keyword\",\n  \"confidence\": 0.98\n}\n```\n\n### Example 6: NO MATCH - COMPETITOR BRAND\n**Keyword:** \"camelback water bottle 32oz\"\n**variations_own:** \"Owala, O-wala, Owla, Ohwala\"\n**related_terms_own:** \"FreeSip, BlenderBottle\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Owala\", \"O-wala\", \"Owla\", \"Ohwala\"], [\"FreeSip\", \"BlenderBottle\"]\n2. Scan keyword: \"camelback water bottle 32oz\"\n   - No match for any Owala variation\n   - No match for FreeSip or BlenderBottle\n   - \"camelback\" is a DIFFERENT brand (competitor)\n3. Decision: null (pass to M03 for competitor check)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"'camelback' is not in variations_own or related_terms_own - likely a competitor brand\",\n  \"confidence\": 0.95\n}\n```\n\n### Example 7: SHORT BRAND NAME (2-3 CHARS) - VALID MATCH\n**Keyword:** \"rx syringes medical\"\n**variations_own:** \"Rx Crush, RxCrush, Rx-Crush, Rx, Rz Crush\"\n**related_terms_own:** \"ENFit\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Rx Crush\", \"RxCrush\", \"Rx-Crush\", \"Rx\", \"Rz Crush\"], [\"ENFit\"]\n2. Scan keyword: Found \"rx\" in \"rx syringes medical\"\n3. Verify: r-x matches R-x - EXACT MATCH (case-insensitive)\n4. Word boundary: \"rx\" is first word - standalone term\n5. Note: Short brands (2-3 chars) ARE valid when explicitly in variations_own\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"rx\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Short brand 'rx' matches 'Rx' in variations_own - valid standalone match\",\n  \"confidence\": 0.94\n}\n```\n\n### Example 8: HALLUCINATION PREVENTION - IMAGINED MATCH\n**Keyword:** \"amazon prime truck toy transformer\"\n**variations_own:** \"Transformers, Transfomers, Tranfomers\"\n**related_terms_own:** \"Cyber Commander Series, Hasbro\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Transformers\", \"Transfomers\", \"Tranfomers\"], [\"Cyber Commander Series\", \"Hasbro\"]\n2. Scan keyword: \"amazon prime truck toy transformer\"\n   - Check for \"transformers\": NOT FOUND (keyword has \"transformer\" singular)\n   - Check for \"transfomers\": NOT FOUND\n   - Check for \"tranfomers\": NOT FOUND\n   - Wait! Let me re-verify \"transformer\" vs \"Transformers\":\n     - Keyword: t-r-a-n-s-f-o-r-m-e-r (11 chars, singular)\n     - Brand: T-r-a-n-s-f-o-r-m-e-r-s (12 chars, plural)\n     - MISMATCH at position 12\n3. Decision: null (singular form is NOT in variations)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"Keyword contains 'transformer' (singular) but brand is 'Transformers' (plural) - NOT an exact match unless singular form is in variations_own\",\n  \"confidence\": 0.93\n}\n```\n\n---\n\n## Confidence Calibration\n\n| Scenario | Confidence Range | Example |\n|----------|------------------|---------|\n| Exact brand at keyword start | 0.95 - 0.98 | \"jbl headphones\" \u2192 JBL |\n| Exact brand in middle/end | 0.92 - 0.96 | \"headphones jbl wireless\" \u2192 JBL |\n| Documented typo match | 0.88 - 0.94 | \"owalaa bottle\" \u2192 matches \"Owalaa\" |\n| Sub-brand/related term match | 0.90 - 0.96 | \"vibe beam earbuds\" \u2192 Vibe Beam |\n| Short brand match (2-3 chars) | 0.88 - 0.94 | \"rx medical\" \u2192 Rx |\n| Clear no-match (generic keyword) | 0.95 - 0.98 | \"wireless earbuds\" \u2192 null |\n| Clear no-match (competitor) | 0.93 - 0.97 | \"sony headphones\" \u2192 null |\n| Similar brand rejection | 0.90 - 0.97 | \"jlab\" rejected for JBL |\n| Edge case (uncertain boundaries) | 0.70 - 0.85 | partial matches, common words |\n\n---\n\n## Common Mistakes to Avoid\n\n### 1. Hallucinating Matches\n- **WRONG:** Assuming \"transformer\" matches \"Transformers\" without checking character-by-character\n- **CORRECT:** Verify exact substring match - singular vs plural matters if not in variations\n\n### 2. Confusing Similar Brand Names\n- **WRONG:** Matching \"jlab\" to \"JBL\" because they sound similar\n- **CORRECT:** j-l-a-b \u2260 J-B-L - these are different companies\n\n### 3. Assuming Unlisted Typos\n- **WRONG:** Matching \"freesipp\" to \"FreeSip\" when \"Freesipp\" is not in variations\n- **CORRECT:** Only match typos that are explicitly documented in variations_own\n\n### 4. Ignoring Word Boundaries\n- **WRONG:** Matching \"owl\" in \"howling\" to brand \"Owl\"\n- **CORRECT:** \"owl\" is part of \"howling\", not a standalone brand reference\n\n### 5. Missing Position-Independent Matches\n- **WRONG:** Only checking keyword start for brand\n- **CORRECT:** Brand can appear anywhere in keyword - start, middle, or end\n\n### 6. Forgetting Short Brands\n- **WRONG:** Dismissing \"rx\" as too short to be a brand\n- **CORRECT:** If \"Rx\" is in variations_own, short brands are valid matches\n\n### 7. Not Checking Non-Brand Patterns\n- **WRONG:** Matching \"B0123JBL456\" as containing \"JBL\"\n- **CORRECT:** ASIN patterns should return null regardless of content\n\n---\n\n## Anti-Hallucination Safeguards\n\n### Before Returning OB, You MUST:\n\n1. **Extract Test:** Can you literally copy-paste the matched_term from the keyword?\n2. **Character Test:** Does each character match exactly (case-insensitive)?\n3. **List Test:** Is the matched_term in variations_own OR related_terms_own?\n4. **Substring Test:** Is the match a valid substring (not middle of another word)?\n\n### Red Flags - Stop and Reconsider:\n- You're inferring a match based on phonetics or meaning\n- You're assuming a typo that isn't documented\n- You're matching based on \"close enough\"\n- You can't point to the exact characters in the keyword\n\n---\n\n## Pre-Output Checklist\n\nBefore returning your answer:\n- [ ] **ANTI-HALLUCINATION CHECK:** Can you literally point to the matched_term within the keyword string?\n- [ ] Did you verify the match character-by-character?\n- [ ] Is the matched_term an exact substring of the keyword (physically present, not inferred)?\n- [ ] Is the matched_term in variations_own OR related_terms_own?\n- [ ] Did you avoid assuming a match based on similarity alone?\n- [ ] Did you check for non-brand patterns (ASIN, PPC terms)?\n- [ ] For short brands (2-3 chars): Did you still verify exact substring match?\n- [ ] Is your confidence score appropriate for the match type?\n\n**FINAL CHECK:** If returning OB, re-read the keyword and visually confirm the matched_term exists in it.\n\n---\n\n## Output Format\n\n```json\n{\n  \"branding_scope_1\": \"OB\" | null,\n  \"matched_term\": \"<the exact brand term found in keyword>\" | null,\n  \"match_type\": \"brand_variation\" | \"sub_brand\" | \"manufacturer\" | null,\n  \"reasoning\": \"Brief explanation of match verification or why no match\",\n  \"confidence\": 0.0-1.0\n}\n```\n\n### Output Field Descriptions:\n- **branding_scope_1:** \"OB\" if own brand match found, null otherwise\n- **matched_term:** The exact substring from the keyword that matched (null if no match)\n- **match_type:** Category of match - brand_variation, sub_brand, or manufacturer\n- **reasoning:** Brief explanation of the verification process\n- **confidence:** Numeric confidence score based on calibration table\n",
      "keyword": "small tiered tray",
      "branding_scope_1": "None"
    },
    {
      "augmented": true,
      "guidelines": "# Module 02 (V3): Own Brand Keyword Classification\n\n## Role\n\nYou are an expert Amazon PPC keyword classifier specializing in brand identification and substring matching. Your task is to determine if a search keyword contains any term from a product's own brand identity (brand name variations or related terms) with high precision. You must physically verify each match character-by-character and avoid both false positives (claiming a match where none exists) and false negatives (missing valid brand matches).\n\n## Task\n\nDetermine if the keyword contains any term from the product's own brand variations or related terms.\n\n**Question:** \"Does the keyword contain any term from `variations_own` or `related_terms_own`?\"\n\n- **YES** \u2192 Classification = **OB** (Own Brand)\n- **NO** \u2192 Pass to next module (M03)\n\n## Input\n\n**Keyword:** {{keyword}}\n\n**Brand Variations:** {{variations_own}}\n\n**Related Terms:** {{related_terms_own}}\n\n`variations_own` contains comma-separated brand name variations including:\n- Official brand name (exact)\n- Common typos and misspellings\n- Phonetic variations\n- Case variations\n\n`related_terms_own` contains comma-separated:\n- Sub-brands and product lines\n- Parent manufacturer (if commonly searched)\n\n---\n\n## Chain-of-Thought Process (REQUIRED)\n\n### Step 1: Parse the Brand Terms\n- Split `variations_own` by comma into individual brand variations\n- Split `related_terms_own` by comma into individual related terms\n- Note each term for character-by-character comparison\n\n### Step 2: Scan the Keyword for Each Term\n- For each brand variation and related term:\n  - Search for the term as a substring in the keyword (case-insensitive)\n  - If found, proceed to Step 3\n  - If not found, continue to next term\n\n### Step 3: Physically Verify the Match\n**CRITICAL - ANTI-HALLUCINATION CHECK:**\n- Extract the exact substring from the keyword that you believe matches\n- Compare the extracted substring character-by-character with the brand term\n- Confirm the match is EXACT (not similar, not close - EXACT)\n\n### Step 4: Validate Word Boundaries (Optional but Recommended)\n- Check if the matched term appears as a standalone word or valid brand substring\n- Be cautious of partial word matches (e.g., \"owl\" in \"howl\" is NOT valid)\n\n### Step 5: Check Against Non-Brand Patterns\n- Verify the keyword is not an ASIN, PPC term, or match type indicator\n- If keyword matches a non-brand pattern, return null regardless of apparent brand match\n\n### Step 6: Make Classification Decision\n- If exact match verified \u2192 OB (Own Brand)\n- If no match found \u2192 null (pass to M03)\n\n---\n\n## Matching Criteria (Detailed)\n\n### IS a Match (Classify as OB):\n\n| Match Type | Example | Why It Matches |\n|------------|---------|----------------|\n| Exact brand name | Keyword: \"jbl bluetooth headphones\", Brand: \"JBL\" | \"jbl\" matches \"JBL\" (case-insensitive) |\n| Documented typo | Keyword: \"owalaa water bottle\", Variations: \"Owala, Owalaa\" | \"Owalaa\" in variations_own |\n| Sub-brand | Keyword: \"vibe beam earbuds\", Related: \"Vibe Beam\" | \"vibe beam\" matches \"Vibe Beam\" |\n| Manufacturer | Keyword: \"transformers hasbro toys\", Related: \"Hasbro\" | \"hasbro\" matches \"Hasbro\" |\n| Short brand (2-3 chars) | Keyword: \"rx syringes\", Variations: \"Rx\" | \"rx\" matches \"Rx\" exactly |\n| Brand at end | Keyword: \"bluetooth headphones jbl\", Brand: \"JBL\" | \"jbl\" matches regardless of position |\n\n### NOT a Match (Pass to M03):\n\n| Scenario | Example | Why Not a Match |\n|----------|---------|-----------------|\n| Similar but different brand | Keyword: \"jlab earbuds\", Brand: \"JBL\" | j-l-a-b \u2260 J-B-L (different characters) |\n| Generic keyword | Keyword: \"wireless earbuds\", Brand: \"JBL\" | No brand term present |\n| Competitor brand | Keyword: \"camelback bottle\", Brand: \"Owala\" | \"camelback\" not in own brand terms |\n| Partial word match | Keyword: \"howling wolf toy\", Brand: \"Owl\" | \"owl\" is substring of \"howling\", not standalone |\n| Unlisted typo | Keyword: \"freesipp bottle\", Related: \"FreeSip\" | \"Freesipp\" not in variations (unless documented) |\n| Non-brand pattern | Keyword: \"B0XXXXXXXXXX water bottle\" | ASIN pattern, not a brand keyword |\n\n---\n\n## Known Non-Brand Patterns (ALWAYS return null)\n\nThese patterns are NEVER brand keywords, even if they appear to contain brand terms:\n\n| Pattern Type | Examples | Action |\n|--------------|----------|--------|\n| ASINs | B0XXXXXXXXXX, B0AB123456, B08XXXXX | Return null |\n| PPC Terms | close-match, loose-match, substitutes, complements | Return null |\n| Match Types | broad match, exact match, phrase match | Return null |\n| Generic Descriptors | best, top, cheap, premium (unless part of brand name) | Continue checking |\n\n---\n\n## Examples with Reasoning\n\n### Example 1: EXACT BRAND MATCH - Start of Keyword\n**Keyword:** \"jbl bluetooth headphones\"\n**variations_own:** \"JBL, J-B-L, JBL-, JBL., JBLl\"\n**related_terms_own:** \"Vibe Beam\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\", \"JBL.\", \"JBLl\"], [\"Vibe Beam\"]\n2. Scan keyword: Found \"jbl\" in \"jbl bluetooth headphones\"\n3. Verify: j-b-l matches J-B-L (case-insensitive) - EXACT MATCH\n4. Word boundary: \"jbl\" is first word - valid standalone term\n5. Non-brand check: Not an ASIN or PPC term\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"jbl\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Exact case-insensitive match: 'jbl' in keyword matches 'JBL' in variations_own\",\n  \"confidence\": 0.98\n}\n```\n\n### Example 2: SUB-BRAND MATCH\n**Keyword:** \"vibe beam earbuds wireless\"\n**variations_own:** \"JBL, J-B-L, JBL-\"\n**related_terms_own:** \"Vibe Beam, Harman\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\"], [\"Vibe Beam\", \"Harman\"]\n2. Scan keyword: No match for JBL variations; found \"vibe beam\" for related terms\n3. Verify: v-i-b-e space b-e-a-m matches V-i-b-e space B-e-a-m - EXACT MATCH\n4. Word boundary: \"vibe beam\" are first two words - valid\n5. Non-brand check: Normal keyword\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"vibe beam\",\n  \"match_type\": \"sub_brand\",\n  \"reasoning\": \"Exact match: 'vibe beam' in keyword matches 'Vibe Beam' in related_terms_own\",\n  \"confidence\": 0.96\n}\n```\n\n### Example 3: DOCUMENTED TYPO MATCH\n**Keyword:** \"Owalaa SS water bottle\"\n**variations_own:** \"Owala, O-wala, Owla, Ohwala, Owsla, Owalaa, Owalla\"\n**related_terms_own:** \"FreeSip, BlenderBottle\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Owala\", \"O-wala\", \"Owla\", \"Ohwala\", \"Owsla\", \"Owalaa\", \"Owalla\"], [\"FreeSip\", \"BlenderBottle\"]\n2. Scan keyword: Found \"Owalaa\" in keyword\n3. Verify: O-w-a-l-a-a matches O-w-a-l-a-a in variations - EXACT MATCH\n4. Word boundary: \"Owalaa\" is first word - valid\n5. Non-brand check: Normal keyword\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"Owalaa\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Exact match: 'Owalaa' is a documented typo variation in variations_own\",\n  \"confidence\": 0.92\n}\n```\n\n### Example 4: NO MATCH - SIMILAR BUT DIFFERENT BRAND\n**Keyword:** \"jlab earbuds wireless\"\n**variations_own:** \"JBL, J-B-L, JBL-, JBL., JBLl, JBLK\"\n**related_terms_own:** \"Vibe Beam\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\", \"JBL.\", \"JBLl\", \"JBLK\"], [\"Vibe Beam\"]\n2. Scan keyword: Check if any term matches\n3. Verify: \"jlab\" vs \"JBL\"\n   - j-l-a-b (4 characters)\n   - J-B-L (3 characters)\n   - Position 2: 'l' vs 'B' - MISMATCH\n   - NOT the same brand!\n4. Continue checking: No other matches found\n5. Decision: null (JLab is a different audio brand)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"'jlab' is NOT 'JBL' - different characters (j-l-a-b vs J-B-L). JLab is a separate audio brand.\",\n  \"confidence\": 0.97\n}\n```\n\n### Example 5: NO MATCH - GENERIC KEYWORD\n**Keyword:** \"wireless earbuds bluetooth\"\n**variations_own:** \"JBL, J-B-L, JBL-\"\n**related_terms_own:** \"Vibe Beam, Harman\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\"], [\"Vibe Beam\", \"Harman\"]\n2. Scan keyword: \"wireless earbuds bluetooth\"\n   - Search for \"jbl\": NOT FOUND\n   - Search for \"j-b-l\": NOT FOUND\n   - Search for \"vibe beam\": NOT FOUND\n   - Search for \"harman\": NOT FOUND\n3. No brand terms found in keyword\n4. Decision: null\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"No brand terms from variations_own or related_terms_own found in keyword\",\n  \"confidence\": 0.98\n}\n```\n\n### Example 6: NO MATCH - COMPETITOR BRAND\n**Keyword:** \"camelback water bottle 32oz\"\n**variations_own:** \"Owala, O-wala, Owla, Ohwala\"\n**related_terms_own:** \"FreeSip, BlenderBottle\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Owala\", \"O-wala\", \"Owla\", \"Ohwala\"], [\"FreeSip\", \"BlenderBottle\"]\n2. Scan keyword: \"camelback water bottle 32oz\"\n   - No match for any Owala variation\n   - No match for FreeSip or BlenderBottle\n   - \"camelback\" is a DIFFERENT brand (competitor)\n3. Decision: null (pass to M03 for competitor check)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"'camelback' is not in variations_own or related_terms_own - likely a competitor brand\",\n  \"confidence\": 0.95\n}\n```\n\n### Example 7: SHORT BRAND NAME (2-3 CHARS) - VALID MATCH\n**Keyword:** \"rx syringes medical\"\n**variations_own:** \"Rx Crush, RxCrush, Rx-Crush, Rx, Rz Crush\"\n**related_terms_own:** \"ENFit\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Rx Crush\", \"RxCrush\", \"Rx-Crush\", \"Rx\", \"Rz Crush\"], [\"ENFit\"]\n2. Scan keyword: Found \"rx\" in \"rx syringes medical\"\n3. Verify: r-x matches R-x - EXACT MATCH (case-insensitive)\n4. Word boundary: \"rx\" is first word - standalone term\n5. Note: Short brands (2-3 chars) ARE valid when explicitly in variations_own\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"rx\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Short brand 'rx' matches 'Rx' in variations_own - valid standalone match\",\n  \"confidence\": 0.94\n}\n```\n\n### Example 8: HALLUCINATION PREVENTION - IMAGINED MATCH\n**Keyword:** \"amazon prime truck toy transformer\"\n**variations_own:** \"Transformers, Transfomers, Tranfomers\"\n**related_terms_own:** \"Cyber Commander Series, Hasbro\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Transformers\", \"Transfomers\", \"Tranfomers\"], [\"Cyber Commander Series\", \"Hasbro\"]\n2. Scan keyword: \"amazon prime truck toy transformer\"\n   - Check for \"transformers\": NOT FOUND (keyword has \"transformer\" singular)\n   - Check for \"transfomers\": NOT FOUND\n   - Check for \"tranfomers\": NOT FOUND\n   - Wait! Let me re-verify \"transformer\" vs \"Transformers\":\n     - Keyword: t-r-a-n-s-f-o-r-m-e-r (11 chars, singular)\n     - Brand: T-r-a-n-s-f-o-r-m-e-r-s (12 chars, plural)\n     - MISMATCH at position 12\n3. Decision: null (singular form is NOT in variations)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"Keyword contains 'transformer' (singular) but brand is 'Transformers' (plural) - NOT an exact match unless singular form is in variations_own\",\n  \"confidence\": 0.93\n}\n```\n\n---\n\n## Confidence Calibration\n\n| Scenario | Confidence Range | Example |\n|----------|------------------|---------|\n| Exact brand at keyword start | 0.95 - 0.98 | \"jbl headphones\" \u2192 JBL |\n| Exact brand in middle/end | 0.92 - 0.96 | \"headphones jbl wireless\" \u2192 JBL |\n| Documented typo match | 0.88 - 0.94 | \"owalaa bottle\" \u2192 matches \"Owalaa\" |\n| Sub-brand/related term match | 0.90 - 0.96 | \"vibe beam earbuds\" \u2192 Vibe Beam |\n| Short brand match (2-3 chars) | 0.88 - 0.94 | \"rx medical\" \u2192 Rx |\n| Clear no-match (generic keyword) | 0.95 - 0.98 | \"wireless earbuds\" \u2192 null |\n| Clear no-match (competitor) | 0.93 - 0.97 | \"sony headphones\" \u2192 null |\n| Similar brand rejection | 0.90 - 0.97 | \"jlab\" rejected for JBL |\n| Edge case (uncertain boundaries) | 0.70 - 0.85 | partial matches, common words |\n\n---\n\n## Common Mistakes to Avoid\n\n### 1. Hallucinating Matches\n- **WRONG:** Assuming \"transformer\" matches \"Transformers\" without checking character-by-character\n- **CORRECT:** Verify exact substring match - singular vs plural matters if not in variations\n\n### 2. Confusing Similar Brand Names\n- **WRONG:** Matching \"jlab\" to \"JBL\" because they sound similar\n- **CORRECT:** j-l-a-b \u2260 J-B-L - these are different companies\n\n### 3. Assuming Unlisted Typos\n- **WRONG:** Matching \"freesipp\" to \"FreeSip\" when \"Freesipp\" is not in variations\n- **CORRECT:** Only match typos that are explicitly documented in variations_own\n\n### 4. Ignoring Word Boundaries\n- **WRONG:** Matching \"owl\" in \"howling\" to brand \"Owl\"\n- **CORRECT:** \"owl\" is part of \"howling\", not a standalone brand reference\n\n### 5. Missing Position-Independent Matches\n- **WRONG:** Only checking keyword start for brand\n- **CORRECT:** Brand can appear anywhere in keyword - start, middle, or end\n\n### 6. Forgetting Short Brands\n- **WRONG:** Dismissing \"rx\" as too short to be a brand\n- **CORRECT:** If \"Rx\" is in variations_own, short brands are valid matches\n\n### 7. Not Checking Non-Brand Patterns\n- **WRONG:** Matching \"B0123JBL456\" as containing \"JBL\"\n- **CORRECT:** ASIN patterns should return null regardless of content\n\n---\n\n## Anti-Hallucination Safeguards\n\n### Before Returning OB, You MUST:\n\n1. **Extract Test:** Can you literally copy-paste the matched_term from the keyword?\n2. **Character Test:** Does each character match exactly (case-insensitive)?\n3. **List Test:** Is the matched_term in variations_own OR related_terms_own?\n4. **Substring Test:** Is the match a valid substring (not middle of another word)?\n\n### Red Flags - Stop and Reconsider:\n- You're inferring a match based on phonetics or meaning\n- You're assuming a typo that isn't documented\n- You're matching based on \"close enough\"\n- You can't point to the exact characters in the keyword\n\n---\n\n## Pre-Output Checklist\n\nBefore returning your answer:\n- [ ] **ANTI-HALLUCINATION CHECK:** Can you literally point to the matched_term within the keyword string?\n- [ ] Did you verify the match character-by-character?\n- [ ] Is the matched_term an exact substring of the keyword (physically present, not inferred)?\n- [ ] Is the matched_term in variations_own OR related_terms_own?\n- [ ] Did you avoid assuming a match based on similarity alone?\n- [ ] Did you check for non-brand patterns (ASIN, PPC terms)?\n- [ ] For short brands (2-3 chars): Did you still verify exact substring match?\n- [ ] Is your confidence score appropriate for the match type?\n\n**FINAL CHECK:** If returning OB, re-read the keyword and visually confirm the matched_term exists in it.\n\n---\n\n## Output Format\n\n```json\n{\n  \"branding_scope_1\": \"OB\" | null,\n  \"matched_term\": \"<the exact brand term found in keyword>\" | null,\n  \"match_type\": \"brand_variation\" | \"sub_brand\" | \"manufacturer\" | null,\n  \"reasoning\": \"Brief explanation of match verification or why no match\",\n  \"confidence\": 0.0-1.0\n}\n```\n\n### Output Field Descriptions:\n- **branding_scope_1:** \"OB\" if own brand match found, null otherwise\n- **matched_term:** The exact substring from the keyword that matched (null if no match)\n- **match_type:** Category of match - brand_variation, sub_brand, or manufacturer\n- **reasoning:** Brief explanation of the verification process\n- **confidence:** Numeric confidence score based on calibration table\n",
      "keyword": "jbl vibe beam 2 earbuds",
      "branding_scope_1": "OB"
    },
    {
      "guidelines": "# Module 02 (V3): Own Brand Keyword Classification\n\n## Role\n\nYou are an expert Amazon PPC keyword classifier specializing in brand identification and substring matching. Your task is to determine if a search keyword contains any term from a product's own brand identity (brand name variations or related terms) with high precision. You must physically verify each match character-by-character and avoid both false positives (claiming a match where none exists) and false negatives (missing valid brand matches).\n\n## Task\n\nDetermine if the keyword contains any term from the product's own brand variations or related terms.\n\n**Question:** \"Does the keyword contain any term from `variations_own` or `related_terms_own`?\"\n\n- **YES** \u2192 Classification = **OB** (Own Brand)\n- **NO** \u2192 Pass to next module (M03)\n\n## Input\n\n**Keyword:** {{keyword}}\n\n**Brand Variations:** {{variations_own}}\n\n**Related Terms:** {{related_terms_own}}\n\n`variations_own` contains comma-separated brand name variations including:\n- Official brand name (exact)\n- Common typos and misspellings\n- Phonetic variations\n- Case variations\n\n`related_terms_own` contains comma-separated:\n- Sub-brands and product lines\n- Parent manufacturer (if commonly searched)\n\n---\n\n## Chain-of-Thought Process (REQUIRED)\n\n### Step 1: Parse the Brand Terms\n- Split `variations_own` by comma into individual brand variations\n- Split `related_terms_own` by comma into individual related terms\n- Note each term for character-by-character comparison\n\n### Step 2: Scan the Keyword for Each Term\n- For each brand variation and related term:\n  - Search for the term as a substring in the keyword (case-insensitive)\n  - If found, proceed to Step 3\n  - If not found, continue to next term\n\n### Step 3: Physically Verify the Match\n**CRITICAL - ANTI-HALLUCINATION CHECK:**\n- Extract the exact substring from the keyword that you believe matches\n- Compare the extracted substring character-by-character with the brand term\n- Confirm the match is EXACT (not similar, not close - EXACT)\n\n### Step 4: Validate Word Boundaries (Optional but Recommended)\n- Check if the matched term appears as a standalone word or valid brand substring\n- Be cautious of partial word matches (e.g., \"owl\" in \"howl\" is NOT valid)\n\n### Step 5: Check Against Non-Brand Patterns\n- Verify the keyword is not an ASIN, PPC term, or match type indicator\n- If keyword matches a non-brand pattern, return null regardless of apparent brand match\n\n### Step 6: Make Classification Decision\n- If exact match verified \u2192 OB (Own Brand)\n- If no match found \u2192 null (pass to M03)\n\n---\n\n## Matching Criteria (Detailed)\n\n### IS a Match (Classify as OB):\n\n| Match Type | Example | Why It Matches |\n|------------|---------|----------------|\n| Exact brand name | Keyword: \"jbl bluetooth headphones\", Brand: \"JBL\" | \"jbl\" matches \"JBL\" (case-insensitive) |\n| Documented typo | Keyword: \"owalaa water bottle\", Variations: \"Owala, Owalaa\" | \"Owalaa\" in variations_own |\n| Sub-brand | Keyword: \"vibe beam earbuds\", Related: \"Vibe Beam\" | \"vibe beam\" matches \"Vibe Beam\" |\n| Manufacturer | Keyword: \"transformers hasbro toys\", Related: \"Hasbro\" | \"hasbro\" matches \"Hasbro\" |\n| Short brand (2-3 chars) | Keyword: \"rx syringes\", Variations: \"Rx\" | \"rx\" matches \"Rx\" exactly |\n| Brand at end | Keyword: \"bluetooth headphones jbl\", Brand: \"JBL\" | \"jbl\" matches regardless of position |\n\n### NOT a Match (Pass to M03):\n\n| Scenario | Example | Why Not a Match |\n|----------|---------|-----------------|\n| Similar but different brand | Keyword: \"jlab earbuds\", Brand: \"JBL\" | j-l-a-b \u2260 J-B-L (different characters) |\n| Generic keyword | Keyword: \"wireless earbuds\", Brand: \"JBL\" | No brand term present |\n| Competitor brand | Keyword: \"camelback bottle\", Brand: \"Owala\" | \"camelback\" not in own brand terms |\n| Partial word match | Keyword: \"howling wolf toy\", Brand: \"Owl\" | \"owl\" is substring of \"howling\", not standalone |\n| Unlisted typo | Keyword: \"freesipp bottle\", Related: \"FreeSip\" | \"Freesipp\" not in variations (unless documented) |\n| Non-brand pattern | Keyword: \"B0XXXXXXXXXX water bottle\" | ASIN pattern, not a brand keyword |\n\n---\n\n## Known Non-Brand Patterns (ALWAYS return null)\n\nThese patterns are NEVER brand keywords, even if they appear to contain brand terms:\n\n| Pattern Type | Examples | Action |\n|--------------|----------|--------|\n| ASINs | B0XXXXXXXXXX, B0AB123456, B08XXXXX | Return null |\n| PPC Terms | close-match, loose-match, substitutes, complements | Return null |\n| Match Types | broad match, exact match, phrase match | Return null |\n| Generic Descriptors | best, top, cheap, premium (unless part of brand name) | Continue checking |\n\n---\n\n## Examples with Reasoning\n\n### Example 1: EXACT BRAND MATCH - Start of Keyword\n**Keyword:** \"jbl bluetooth headphones\"\n**variations_own:** \"JBL, J-B-L, JBL-, JBL., JBLl\"\n**related_terms_own:** \"Vibe Beam\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\", \"JBL.\", \"JBLl\"], [\"Vibe Beam\"]\n2. Scan keyword: Found \"jbl\" in \"jbl bluetooth headphones\"\n3. Verify: j-b-l matches J-B-L (case-insensitive) - EXACT MATCH\n4. Word boundary: \"jbl\" is first word - valid standalone term\n5. Non-brand check: Not an ASIN or PPC term\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"jbl\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Exact case-insensitive match: 'jbl' in keyword matches 'JBL' in variations_own\",\n  \"confidence\": 0.98\n}\n```\n\n### Example 2: SUB-BRAND MATCH\n**Keyword:** \"vibe beam earbuds wireless\"\n**variations_own:** \"JBL, J-B-L, JBL-\"\n**related_terms_own:** \"Vibe Beam, Harman\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\"], [\"Vibe Beam\", \"Harman\"]\n2. Scan keyword: No match for JBL variations; found \"vibe beam\" for related terms\n3. Verify: v-i-b-e space b-e-a-m matches V-i-b-e space B-e-a-m - EXACT MATCH\n4. Word boundary: \"vibe beam\" are first two words - valid\n5. Non-brand check: Normal keyword\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"vibe beam\",\n  \"match_type\": \"sub_brand\",\n  \"reasoning\": \"Exact match: 'vibe beam' in keyword matches 'Vibe Beam' in related_terms_own\",\n  \"confidence\": 0.96\n}\n```\n\n### Example 3: DOCUMENTED TYPO MATCH\n**Keyword:** \"Owalaa SS water bottle\"\n**variations_own:** \"Owala, O-wala, Owla, Ohwala, Owsla, Owalaa, Owalla\"\n**related_terms_own:** \"FreeSip, BlenderBottle\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Owala\", \"O-wala\", \"Owla\", \"Ohwala\", \"Owsla\", \"Owalaa\", \"Owalla\"], [\"FreeSip\", \"BlenderBottle\"]\n2. Scan keyword: Found \"Owalaa\" in keyword\n3. Verify: O-w-a-l-a-a matches O-w-a-l-a-a in variations - EXACT MATCH\n4. Word boundary: \"Owalaa\" is first word - valid\n5. Non-brand check: Normal keyword\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"Owalaa\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Exact match: 'Owalaa' is a documented typo variation in variations_own\",\n  \"confidence\": 0.92\n}\n```\n\n### Example 4: NO MATCH - SIMILAR BUT DIFFERENT BRAND\n**Keyword:** \"jlab earbuds wireless\"\n**variations_own:** \"JBL, J-B-L, JBL-, JBL., JBLl, JBLK\"\n**related_terms_own:** \"Vibe Beam\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\", \"JBL.\", \"JBLl\", \"JBLK\"], [\"Vibe Beam\"]\n2. Scan keyword: Check if any term matches\n3. Verify: \"jlab\" vs \"JBL\"\n   - j-l-a-b (4 characters)\n   - J-B-L (3 characters)\n   - Position 2: 'l' vs 'B' - MISMATCH\n   - NOT the same brand!\n4. Continue checking: No other matches found\n5. Decision: null (JLab is a different audio brand)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"'jlab' is NOT 'JBL' - different characters (j-l-a-b vs J-B-L). JLab is a separate audio brand.\",\n  \"confidence\": 0.97\n}\n```\n\n### Example 5: NO MATCH - GENERIC KEYWORD\n**Keyword:** \"wireless earbuds bluetooth\"\n**variations_own:** \"JBL, J-B-L, JBL-\"\n**related_terms_own:** \"Vibe Beam, Harman\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\"], [\"Vibe Beam\", \"Harman\"]\n2. Scan keyword: \"wireless earbuds bluetooth\"\n   - Search for \"jbl\": NOT FOUND\n   - Search for \"j-b-l\": NOT FOUND\n   - Search for \"vibe beam\": NOT FOUND\n   - Search for \"harman\": NOT FOUND\n3. No brand terms found in keyword\n4. Decision: null\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"No brand terms from variations_own or related_terms_own found in keyword\",\n  \"confidence\": 0.98\n}\n```\n\n### Example 6: NO MATCH - COMPETITOR BRAND\n**Keyword:** \"camelback water bottle 32oz\"\n**variations_own:** \"Owala, O-wala, Owla, Ohwala\"\n**related_terms_own:** \"FreeSip, BlenderBottle\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Owala\", \"O-wala\", \"Owla\", \"Ohwala\"], [\"FreeSip\", \"BlenderBottle\"]\n2. Scan keyword: \"camelback water bottle 32oz\"\n   - No match for any Owala variation\n   - No match for FreeSip or BlenderBottle\n   - \"camelback\" is a DIFFERENT brand (competitor)\n3. Decision: null (pass to M03 for competitor check)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"'camelback' is not in variations_own or related_terms_own - likely a competitor brand\",\n  \"confidence\": 0.95\n}\n```\n\n### Example 7: SHORT BRAND NAME (2-3 CHARS) - VALID MATCH\n**Keyword:** \"rx syringes medical\"\n**variations_own:** \"Rx Crush, RxCrush, Rx-Crush, Rx, Rz Crush\"\n**related_terms_own:** \"ENFit\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Rx Crush\", \"RxCrush\", \"Rx-Crush\", \"Rx\", \"Rz Crush\"], [\"ENFit\"]\n2. Scan keyword: Found \"rx\" in \"rx syringes medical\"\n3. Verify: r-x matches R-x - EXACT MATCH (case-insensitive)\n4. Word boundary: \"rx\" is first word - standalone term\n5. Note: Short brands (2-3 chars) ARE valid when explicitly in variations_own\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"rx\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Short brand 'rx' matches 'Rx' in variations_own - valid standalone match\",\n  \"confidence\": 0.94\n}\n```\n\n### Example 8: HALLUCINATION PREVENTION - IMAGINED MATCH\n**Keyword:** \"amazon prime truck toy transformer\"\n**variations_own:** \"Transformers, Transfomers, Tranfomers\"\n**related_terms_own:** \"Cyber Commander Series, Hasbro\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Transformers\", \"Transfomers\", \"Tranfomers\"], [\"Cyber Commander Series\", \"Hasbro\"]\n2. Scan keyword: \"amazon prime truck toy transformer\"\n   - Check for \"transformers\": NOT FOUND (keyword has \"transformer\" singular)\n   - Check for \"transfomers\": NOT FOUND\n   - Check for \"tranfomers\": NOT FOUND\n   - Wait! Let me re-verify \"transformer\" vs \"Transformers\":\n     - Keyword: t-r-a-n-s-f-o-r-m-e-r (11 chars, singular)\n     - Brand: T-r-a-n-s-f-o-r-m-e-r-s (12 chars, plural)\n     - MISMATCH at position 12\n3. Decision: null (singular form is NOT in variations)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"Keyword contains 'transformer' (singular) but brand is 'Transformers' (plural) - NOT an exact match unless singular form is in variations_own\",\n  \"confidence\": 0.93\n}\n```\n\n---\n\n## Confidence Calibration\n\n| Scenario | Confidence Range | Example |\n|----------|------------------|---------|\n| Exact brand at keyword start | 0.95 - 0.98 | \"jbl headphones\" \u2192 JBL |\n| Exact brand in middle/end | 0.92 - 0.96 | \"headphones jbl wireless\" \u2192 JBL |\n| Documented typo match | 0.88 - 0.94 | \"owalaa bottle\" \u2192 matches \"Owalaa\" |\n| Sub-brand/related term match | 0.90 - 0.96 | \"vibe beam earbuds\" \u2192 Vibe Beam |\n| Short brand match (2-3 chars) | 0.88 - 0.94 | \"rx medical\" \u2192 Rx |\n| Clear no-match (generic keyword) | 0.95 - 0.98 | \"wireless earbuds\" \u2192 null |\n| Clear no-match (competitor) | 0.93 - 0.97 | \"sony headphones\" \u2192 null |\n| Similar brand rejection | 0.90 - 0.97 | \"jlab\" rejected for JBL |\n| Edge case (uncertain boundaries) | 0.70 - 0.85 | partial matches, common words |\n\n---\n\n## Common Mistakes to Avoid\n\n### 1. Hallucinating Matches\n- **WRONG:** Assuming \"transformer\" matches \"Transformers\" without checking character-by-character\n- **CORRECT:** Verify exact substring match - singular vs plural matters if not in variations\n\n### 2. Confusing Similar Brand Names\n- **WRONG:** Matching \"jlab\" to \"JBL\" because they sound similar\n- **CORRECT:** j-l-a-b \u2260 J-B-L - these are different companies\n\n### 3. Assuming Unlisted Typos\n- **WRONG:** Matching \"freesipp\" to \"FreeSip\" when \"Freesipp\" is not in variations\n- **CORRECT:** Only match typos that are explicitly documented in variations_own\n\n### 4. Ignoring Word Boundaries\n- **WRONG:** Matching \"owl\" in \"howling\" to brand \"Owl\"\n- **CORRECT:** \"owl\" is part of \"howling\", not a standalone brand reference\n\n### 5. Missing Position-Independent Matches\n- **WRONG:** Only checking keyword start for brand\n- **CORRECT:** Brand can appear anywhere in keyword - start, middle, or end\n\n### 6. Forgetting Short Brands\n- **WRONG:** Dismissing \"rx\" as too short to be a brand\n- **CORRECT:** If \"Rx\" is in variations_own, short brands are valid matches\n\n### 7. Not Checking Non-Brand Patterns\n- **WRONG:** Matching \"B0123JBL456\" as containing \"JBL\"\n- **CORRECT:** ASIN patterns should return null regardless of content\n\n---\n\n## Anti-Hallucination Safeguards\n\n### Before Returning OB, You MUST:\n\n1. **Extract Test:** Can you literally copy-paste the matched_term from the keyword?\n2. **Character Test:** Does each character match exactly (case-insensitive)?\n3. **List Test:** Is the matched_term in variations_own OR related_terms_own?\n4. **Substring Test:** Is the match a valid substring (not middle of another word)?\n\n### Red Flags - Stop and Reconsider:\n- You're inferring a match based on phonetics or meaning\n- You're assuming a typo that isn't documented\n- You're matching based on \"close enough\"\n- You can't point to the exact characters in the keyword\n\n---\n\n## Pre-Output Checklist\n\nBefore returning your answer:\n- [ ] **ANTI-HALLUCINATION CHECK:** Can you literally point to the matched_term within the keyword string?\n- [ ] Did you verify the match character-by-character?\n- [ ] Is the matched_term an exact substring of the keyword (physically present, not inferred)?\n- [ ] Is the matched_term in variations_own OR related_terms_own?\n- [ ] Did you avoid assuming a match based on similarity alone?\n- [ ] Did you check for non-brand patterns (ASIN, PPC terms)?\n- [ ] For short brands (2-3 chars): Did you still verify exact substring match?\n- [ ] Is your confidence score appropriate for the match type?\n\n**FINAL CHECK:** If returning OB, re-read the keyword and visually confirm the matched_term exists in it.\n\n---\n\n## Output Format\n\n```json\n{\n  \"branding_scope_1\": \"OB\" | null,\n  \"matched_term\": \"<the exact brand term found in keyword>\" | null,\n  \"match_type\": \"brand_variation\" | \"sub_brand\" | \"manufacturer\" | null,\n  \"reasoning\": \"Brief explanation of match verification or why no match\",\n  \"confidence\": 0.0-1.0\n}\n```\n\n### Output Field Descriptions:\n- **branding_scope_1:** \"OB\" if own brand match found, null otherwise\n- **matched_term:** The exact substring from the keyword that matched (null if no match)\n- **match_type:** Category of match - brand_variation, sub_brand, or manufacturer\n- **reasoning:** Brief explanation of the verification process\n- **confidence:** Numeric confidence score based on calibration table\n",
      "keyword": "sink storage rack",
      "variations_own": "Cisily, Cisly, Cicily, Cisilyy, Cisilyi, Cisilyo, Cisilyu, Cisilyt, Cisily-",
      "branding_scope_1": "NULL"
    },
    {
      "guidelines": "# Module 02 (V3): Own Brand Keyword Classification\n\n## Role\n\nYou are an expert Amazon PPC keyword classifier specializing in brand identification and substring matching. Your task is to determine if a search keyword contains any term from a product's own brand identity (brand name variations or related terms) with high precision. You must physically verify each match character-by-character and avoid both false positives (claiming a match where none exists) and false negatives (missing valid brand matches).\n\n## Task\n\nDetermine if the keyword contains any term from the product's own brand variations or related terms.\n\n**Question:** \"Does the keyword contain any term from `variations_own` or `related_terms_own`?\"\n\n- **YES** \u2192 Classification = **OB** (Own Brand)\n- **NO** \u2192 Pass to next module (M03)\n\n## Input\n\n**Keyword:** {{keyword}}\n\n**Brand Variations:** {{variations_own}}\n\n**Related Terms:** {{related_terms_own}}\n\n`variations_own` contains comma-separated brand name variations including:\n- Official brand name (exact)\n- Common typos and misspellings\n- Phonetic variations\n- Case variations\n\n`related_terms_own` contains comma-separated:\n- Sub-brands and product lines\n- Parent manufacturer (if commonly searched)\n\n---\n\n## Chain-of-Thought Process (REQUIRED)\n\n### Step 1: Parse the Brand Terms\n- Split `variations_own` by comma into individual brand variations\n- Split `related_terms_own` by comma into individual related terms\n- Note each term for character-by-character comparison\n\n### Step 2: Scan the Keyword for Each Term\n- For each brand variation and related term:\n  - Search for the term as a substring in the keyword (case-insensitive)\n  - If found, proceed to Step 3\n  - If not found, continue to next term\n\n### Step 3: Physically Verify the Match\n**CRITICAL - ANTI-HALLUCINATION CHECK:**\n- Extract the exact substring from the keyword that you believe matches\n- Compare the extracted substring character-by-character with the brand term\n- Confirm the match is EXACT (not similar, not close - EXACT)\n\n### Step 4: Validate Word Boundaries (Optional but Recommended)\n- Check if the matched term appears as a standalone word or valid brand substring\n- Be cautious of partial word matches (e.g., \"owl\" in \"howl\" is NOT valid)\n\n### Step 5: Check Against Non-Brand Patterns\n- Verify the keyword is not an ASIN, PPC term, or match type indicator\n- If keyword matches a non-brand pattern, return null regardless of apparent brand match\n\n### Step 6: Make Classification Decision\n- If exact match verified \u2192 OB (Own Brand)\n- If no match found \u2192 null (pass to M03)\n\n---\n\n## Matching Criteria (Detailed)\n\n### IS a Match (Classify as OB):\n\n| Match Type | Example | Why It Matches |\n|------------|---------|----------------|\n| Exact brand name | Keyword: \"jbl bluetooth headphones\", Brand: \"JBL\" | \"jbl\" matches \"JBL\" (case-insensitive) |\n| Documented typo | Keyword: \"owalaa water bottle\", Variations: \"Owala, Owalaa\" | \"Owalaa\" in variations_own |\n| Sub-brand | Keyword: \"vibe beam earbuds\", Related: \"Vibe Beam\" | \"vibe beam\" matches \"Vibe Beam\" |\n| Manufacturer | Keyword: \"transformers hasbro toys\", Related: \"Hasbro\" | \"hasbro\" matches \"Hasbro\" |\n| Short brand (2-3 chars) | Keyword: \"rx syringes\", Variations: \"Rx\" | \"rx\" matches \"Rx\" exactly |\n| Brand at end | Keyword: \"bluetooth headphones jbl\", Brand: \"JBL\" | \"jbl\" matches regardless of position |\n\n### NOT a Match (Pass to M03):\n\n| Scenario | Example | Why Not a Match |\n|----------|---------|-----------------|\n| Similar but different brand | Keyword: \"jlab earbuds\", Brand: \"JBL\" | j-l-a-b \u2260 J-B-L (different characters) |\n| Generic keyword | Keyword: \"wireless earbuds\", Brand: \"JBL\" | No brand term present |\n| Competitor brand | Keyword: \"camelback bottle\", Brand: \"Owala\" | \"camelback\" not in own brand terms |\n| Partial word match | Keyword: \"howling wolf toy\", Brand: \"Owl\" | \"owl\" is substring of \"howling\", not standalone |\n| Unlisted typo | Keyword: \"freesipp bottle\", Related: \"FreeSip\" | \"Freesipp\" not in variations (unless documented) |\n| Non-brand pattern | Keyword: \"B0XXXXXXXXXX water bottle\" | ASIN pattern, not a brand keyword |\n\n---\n\n## Known Non-Brand Patterns (ALWAYS return null)\n\nThese patterns are NEVER brand keywords, even if they appear to contain brand terms:\n\n| Pattern Type | Examples | Action |\n|--------------|----------|--------|\n| ASINs | B0XXXXXXXXXX, B0AB123456, B08XXXXX | Return null |\n| PPC Terms | close-match, loose-match, substitutes, complements | Return null |\n| Match Types | broad match, exact match, phrase match | Return null |\n| Generic Descriptors | best, top, cheap, premium (unless part of brand name) | Continue checking |\n\n---\n\n## Examples with Reasoning\n\n### Example 1: EXACT BRAND MATCH - Start of Keyword\n**Keyword:** \"jbl bluetooth headphones\"\n**variations_own:** \"JBL, J-B-L, JBL-, JBL., JBLl\"\n**related_terms_own:** \"Vibe Beam\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\", \"JBL.\", \"JBLl\"], [\"Vibe Beam\"]\n2. Scan keyword: Found \"jbl\" in \"jbl bluetooth headphones\"\n3. Verify: j-b-l matches J-B-L (case-insensitive) - EXACT MATCH\n4. Word boundary: \"jbl\" is first word - valid standalone term\n5. Non-brand check: Not an ASIN or PPC term\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"jbl\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Exact case-insensitive match: 'jbl' in keyword matches 'JBL' in variations_own\",\n  \"confidence\": 0.98\n}\n```\n\n### Example 2: SUB-BRAND MATCH\n**Keyword:** \"vibe beam earbuds wireless\"\n**variations_own:** \"JBL, J-B-L, JBL-\"\n**related_terms_own:** \"Vibe Beam, Harman\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\"], [\"Vibe Beam\", \"Harman\"]\n2. Scan keyword: No match for JBL variations; found \"vibe beam\" for related terms\n3. Verify: v-i-b-e space b-e-a-m matches V-i-b-e space B-e-a-m - EXACT MATCH\n4. Word boundary: \"vibe beam\" are first two words - valid\n5. Non-brand check: Normal keyword\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"vibe beam\",\n  \"match_type\": \"sub_brand\",\n  \"reasoning\": \"Exact match: 'vibe beam' in keyword matches 'Vibe Beam' in related_terms_own\",\n  \"confidence\": 0.96\n}\n```\n\n### Example 3: DOCUMENTED TYPO MATCH\n**Keyword:** \"Owalaa SS water bottle\"\n**variations_own:** \"Owala, O-wala, Owla, Ohwala, Owsla, Owalaa, Owalla\"\n**related_terms_own:** \"FreeSip, BlenderBottle\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Owala\", \"O-wala\", \"Owla\", \"Ohwala\", \"Owsla\", \"Owalaa\", \"Owalla\"], [\"FreeSip\", \"BlenderBottle\"]\n2. Scan keyword: Found \"Owalaa\" in keyword\n3. Verify: O-w-a-l-a-a matches O-w-a-l-a-a in variations - EXACT MATCH\n4. Word boundary: \"Owalaa\" is first word - valid\n5. Non-brand check: Normal keyword\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"Owalaa\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Exact match: 'Owalaa' is a documented typo variation in variations_own\",\n  \"confidence\": 0.92\n}\n```\n\n### Example 4: NO MATCH - SIMILAR BUT DIFFERENT BRAND\n**Keyword:** \"jlab earbuds wireless\"\n**variations_own:** \"JBL, J-B-L, JBL-, JBL., JBLl, JBLK\"\n**related_terms_own:** \"Vibe Beam\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\", \"JBL.\", \"JBLl\", \"JBLK\"], [\"Vibe Beam\"]\n2. Scan keyword: Check if any term matches\n3. Verify: \"jlab\" vs \"JBL\"\n   - j-l-a-b (4 characters)\n   - J-B-L (3 characters)\n   - Position 2: 'l' vs 'B' - MISMATCH\n   - NOT the same brand!\n4. Continue checking: No other matches found\n5. Decision: null (JLab is a different audio brand)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"'jlab' is NOT 'JBL' - different characters (j-l-a-b vs J-B-L). JLab is a separate audio brand.\",\n  \"confidence\": 0.97\n}\n```\n\n### Example 5: NO MATCH - GENERIC KEYWORD\n**Keyword:** \"wireless earbuds bluetooth\"\n**variations_own:** \"JBL, J-B-L, JBL-\"\n**related_terms_own:** \"Vibe Beam, Harman\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"JBL\", \"J-B-L\", \"JBL-\"], [\"Vibe Beam\", \"Harman\"]\n2. Scan keyword: \"wireless earbuds bluetooth\"\n   - Search for \"jbl\": NOT FOUND\n   - Search for \"j-b-l\": NOT FOUND\n   - Search for \"vibe beam\": NOT FOUND\n   - Search for \"harman\": NOT FOUND\n3. No brand terms found in keyword\n4. Decision: null\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"No brand terms from variations_own or related_terms_own found in keyword\",\n  \"confidence\": 0.98\n}\n```\n\n### Example 6: NO MATCH - COMPETITOR BRAND\n**Keyword:** \"camelback water bottle 32oz\"\n**variations_own:** \"Owala, O-wala, Owla, Ohwala\"\n**related_terms_own:** \"FreeSip, BlenderBottle\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Owala\", \"O-wala\", \"Owla\", \"Ohwala\"], [\"FreeSip\", \"BlenderBottle\"]\n2. Scan keyword: \"camelback water bottle 32oz\"\n   - No match for any Owala variation\n   - No match for FreeSip or BlenderBottle\n   - \"camelback\" is a DIFFERENT brand (competitor)\n3. Decision: null (pass to M03 for competitor check)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"'camelback' is not in variations_own or related_terms_own - likely a competitor brand\",\n  \"confidence\": 0.95\n}\n```\n\n### Example 7: SHORT BRAND NAME (2-3 CHARS) - VALID MATCH\n**Keyword:** \"rx syringes medical\"\n**variations_own:** \"Rx Crush, RxCrush, Rx-Crush, Rx, Rz Crush\"\n**related_terms_own:** \"ENFit\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Rx Crush\", \"RxCrush\", \"Rx-Crush\", \"Rx\", \"Rz Crush\"], [\"ENFit\"]\n2. Scan keyword: Found \"rx\" in \"rx syringes medical\"\n3. Verify: r-x matches R-x - EXACT MATCH (case-insensitive)\n4. Word boundary: \"rx\" is first word - standalone term\n5. Note: Short brands (2-3 chars) ARE valid when explicitly in variations_own\n6. Decision: OB\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": \"OB\",\n  \"matched_term\": \"rx\",\n  \"match_type\": \"brand_variation\",\n  \"reasoning\": \"Short brand 'rx' matches 'Rx' in variations_own - valid standalone match\",\n  \"confidence\": 0.94\n}\n```\n\n### Example 8: HALLUCINATION PREVENTION - IMAGINED MATCH\n**Keyword:** \"amazon prime truck toy transformer\"\n**variations_own:** \"Transformers, Transfomers, Tranfomers\"\n**related_terms_own:** \"Cyber Commander Series, Hasbro\"\n\n**Chain-of-Thought:**\n1. Parse terms: [\"Transformers\", \"Transfomers\", \"Tranfomers\"], [\"Cyber Commander Series\", \"Hasbro\"]\n2. Scan keyword: \"amazon prime truck toy transformer\"\n   - Check for \"transformers\": NOT FOUND (keyword has \"transformer\" singular)\n   - Check for \"transfomers\": NOT FOUND\n   - Check for \"tranfomers\": NOT FOUND\n   - Wait! Let me re-verify \"transformer\" vs \"Transformers\":\n     - Keyword: t-r-a-n-s-f-o-r-m-e-r (11 chars, singular)\n     - Brand: T-r-a-n-s-f-o-r-m-e-r-s (12 chars, plural)\n     - MISMATCH at position 12\n3. Decision: null (singular form is NOT in variations)\n\n**Output:**\n```json\n{\n  \"branding_scope_1\": null,\n  \"matched_term\": null,\n  \"match_type\": null,\n  \"reasoning\": \"Keyword contains 'transformer' (singular) but brand is 'Transformers' (plural) - NOT an exact match unless singular form is in variations_own\",\n  \"confidence\": 0.93\n}\n```\n\n---\n\n## Confidence Calibration\n\n| Scenario | Confidence Range | Example |\n|----------|------------------|---------|\n| Exact brand at keyword start | 0.95 - 0.98 | \"jbl headphones\" \u2192 JBL |\n| Exact brand in middle/end | 0.92 - 0.96 | \"headphones jbl wireless\" \u2192 JBL |\n| Documented typo match | 0.88 - 0.94 | \"owalaa bottle\" \u2192 matches \"Owalaa\" |\n| Sub-brand/related term match | 0.90 - 0.96 | \"vibe beam earbuds\" \u2192 Vibe Beam |\n| Short brand match (2-3 chars) | 0.88 - 0.94 | \"rx medical\" \u2192 Rx |\n| Clear no-match (generic keyword) | 0.95 - 0.98 | \"wireless earbuds\" \u2192 null |\n| Clear no-match (competitor) | 0.93 - 0.97 | \"sony headphones\" \u2192 null |\n| Similar brand rejection | 0.90 - 0.97 | \"jlab\" rejected for JBL |\n| Edge case (uncertain boundaries) | 0.70 - 0.85 | partial matches, common words |\n\n---\n\n## Common Mistakes to Avoid\n\n### 1. Hallucinating Matches\n- **WRONG:** Assuming \"transformer\" matches \"Transformers\" without checking character-by-character\n- **CORRECT:** Verify exact substring match - singular vs plural matters if not in variations\n\n### 2. Confusing Similar Brand Names\n- **WRONG:** Matching \"jlab\" to \"JBL\" because they sound similar\n- **CORRECT:** j-l-a-b \u2260 J-B-L - these are different companies\n\n### 3. Assuming Unlisted Typos\n- **WRONG:** Matching \"freesipp\" to \"FreeSip\" when \"Freesipp\" is not in variations\n- **CORRECT:** Only match typos that are explicitly documented in variations_own\n\n### 4. Ignoring Word Boundaries\n- **WRONG:** Matching \"owl\" in \"howling\" to brand \"Owl\"\n- **CORRECT:** \"owl\" is part of \"howling\", not a standalone brand reference\n\n### 5. Missing Position-Independent Matches\n- **WRONG:** Only checking keyword start for brand\n- **CORRECT:** Brand can appear anywhere in keyword - start, middle, or end\n\n### 6. Forgetting Short Brands\n- **WRONG:** Dismissing \"rx\" as too short to be a brand\n- **CORRECT:** If \"Rx\" is in variations_own, short brands are valid matches\n\n### 7. Not Checking Non-Brand Patterns\n- **WRONG:** Matching \"B0123JBL456\" as containing \"JBL\"\n- **CORRECT:** ASIN patterns should return null regardless of content\n\n---\n\n## Anti-Hallucination Safeguards\n\n### Before Returning OB, You MUST:\n\n1. **Extract Test:** Can you literally copy-paste the matched_term from the keyword?\n2. **Character Test:** Does each character match exactly (case-insensitive)?\n3. **List Test:** Is the matched_term in variations_own OR related_terms_own?\n4. **Substring Test:** Is the match a valid substring (not middle of another word)?\n\n### Red Flags - Stop and Reconsider:\n- You're inferring a match based on phonetics or meaning\n- You're assuming a typo that isn't documented\n- You're matching based on \"close enough\"\n- You can't point to the exact characters in the keyword\n\n---\n\n## Pre-Output Checklist\n\nBefore returning your answer:\n- [ ] **ANTI-HALLUCINATION CHECK:** Can you literally point to the matched_term within the keyword string?\n- [ ] Did you verify the match character-by-character?\n- [ ] Is the matched_term an exact substring of the keyword (physically present, not inferred)?\n- [ ] Is the matched_term in variations_own OR related_terms_own?\n- [ ] Did you avoid assuming a match based on similarity alone?\n- [ ] Did you check for non-brand patterns (ASIN, PPC terms)?\n- [ ] For short brands (2-3 chars): Did you still verify exact substring match?\n- [ ] Is your confidence score appropriate for the match type?\n\n**FINAL CHECK:** If returning OB, re-read the keyword and visually confirm the matched_term exists in it.\n\n---\n\n## Output Format\n\n```json\n{\n  \"branding_scope_1\": \"OB\" | null,\n  \"matched_term\": \"<the exact brand term found in keyword>\" | null,\n  \"match_type\": \"brand_variation\" | \"sub_brand\" | \"manufacturer\" | null,\n  \"reasoning\": \"Brief explanation of match verification or why no match\",\n  \"confidence\": 0.0-1.0\n}\n```\n\n### Output Field Descriptions:\n- **branding_scope_1:** \"OB\" if own brand match found, null otherwise\n- **matched_term:** The exact substring from the keyword that matched (null if no match)\n- **match_type:** Category of match - brand_variation, sub_brand, or manufacturer\n- **reasoning:** Brief explanation of the verification process\n- **confidence:** Numeric confidence score based on calibration table\n",
      "keyword": "kitchen sink soap organizer",
      "variations_own": "Cisily, Cisly, Cicily, Cisilyy, Cisilyi, Cisilyo, Cisilyu, Cisilyt, Cisily-",
      "branding_scope_1": "NULL"
    }
  ],
  "signature": {
    "instructions": "Given the keyword, brand entities, and classification guidelines, determine if the keyword contains any term from the product's own brand variations or related terms. Use a detailed process that involves character-by-character verification of potential matches, ensuring to avoid false positives and negatives. Return 'OB' if a match is found, otherwise pass to the next module.",
    "fields": [
      {
        "prefix": "Keyword:",
        "description": "${keyword}"
      },
      {
        "prefix": "Brand Entities:",
        "description": "${brand_entities}"
      },
      {
        "prefix": "Guidelines:",
        "description": "${guidelines}"
      },
      {
        "prefix": "Branding Scope 1:",
        "description": "${branding_scope_1}"
      }
    ]
  },
  "lm": null
}