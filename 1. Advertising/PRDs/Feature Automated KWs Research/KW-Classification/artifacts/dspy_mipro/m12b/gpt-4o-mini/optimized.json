{
  "module": "m12b",
  "provider": "gpt-4o-mini",
  "score": 70.0,
  "guidelines": "# Module 12 (V1.1): Keyword Classification Decision\n\n## Task\n\nClassify the keyword's relationship to the product using a structured decision tree. Output one of four classifications: **R** (Relevant), **S** (Substitute), **C** (Complementary), or **N** (Negative).\n\n## Decision Rules\n\nApply these rules IN ORDER. Stop at the first matching rule.\n\n**Rule 1: HARD CONSTRAINT CHECK**\n- IF keyword violates any hard constraint → **RETURN N (Negative)** and STOP\n- OTHERWISE → continue to Rule 2\n\n**Rule 2: SAME PRODUCT TYPE + SAME USE**\n- IF keyword asks for the SAME product type AND supports the SAME primary use → **RETURN R (Relevant)** and STOP\n- OTHERWISE → continue to Rule 3\n\n**Rule 3: SAME PRODUCT TYPE + DIFFERENT USE**\n- IF keyword asks for the SAME product type BUT different primary use → **RETURN N (Negative)** and STOP\n- OTHERWISE → continue to Rule 4\n\n**Rule 4: SUBSTITUTE CHECK (Different Product Type)**\n- IF keyword describes a DIFFERENT product type that serves the SAME CUSTOMER NEED → **RETURN S (Substitute)** and STOP\n- Think broadly: would a customer considering this product also consider the keyword's product?\n- Examples: travel mug↔water bottle (both: hydration), speaker↔earbuds (both: audio)\n- OTHERWISE → continue to Rule 5\n\n**Rule 5: COMPLEMENTARY CHECK**\n- IF keyword is for a product commonly USED TOGETHER with this product → **RETURN C (Complementary)** and STOP\n- OTHERWISE → **RETURN N (Negative)**\n\n## Input\n\n**Keyword:** {{keyword}}\n\n**Product Title:** {{title}}\n\n**Bullet Points:**\n{{bullet_points}}\n\n**Description:**\n{{description}}\n\n**Primary Intended Use:** {{validated_use}}\n\n**Product Type Taxonomy:**\n{{taxonomy}}\n\n**Attributes:**\n{{attribute_table}}\n\n**Hard Constraints:**\n{{hard_constraints}}\n\n## Classification Definitions\n\n### **Relevant (R)**\nKeywords that describe the **same product type** as the ASIN and support the **same primary intended use**.\n\n| Example ASIN | Keyword | Why Relevant |\n|--------------|---------|--------------|\n| Stainless Steel Water Bottle | insulated water bottle | Same product type, same use (portable hydration) |\n| Wireless Bluetooth Earbuds | wireless earphones | Same product type, same use (personal audio listening) |\n| Memory Foam Pillow | bed pillow | Same product type, same use (head/neck support during sleep) |\n\n### **Substitute (S)**\nKeywords that describe a **different product type** but satisfy the **same primary intended use** or **the same underlying customer need** as the ASIN.\n\n| Example ASIN | Keyword | Why Substitute |\n|--------------|---------|----------------|\n| Stainless Steel Water Bottle | plastic tumbler | Different product type, but still satisfies portable hydration |\n| Stainless Steel Water Bottle | travel mug | Different product type, but customer need is the same: carrying drinks |\n| Wireless Bluetooth Earbuds | wired headphones | Different product type, but still satisfies personal audio listening |\n| Wireless Bluetooth Earbuds | bluetooth speaker | Different product type, but same need: listening to audio |\n| Memory Foam Pillow | buckwheat pillow | Different product type, but still satisfies head/neck support during sleep |\n| Puffer Jacket | long winter coat | Different product type, but same need: cold weather body warmth |\n| Puffer Jacket | sweater | Different product type, but same need: warmth |\n| Oven Mitt | heat resistant towel | Different product type, but same need: heat protection when cooking |\n\n**Critical insight:** Think about what the CUSTOMER WANTS to accomplish. If both products solve the same customer problem, they are substitutes. Ask: \"Would someone shopping for the ASIN also consider buying the keyword's product instead?\"\n\n### **Complementary (C)**\nKeywords that describe a **different product** that is **commonly used together** with the ASIN.\n\n| Example ASIN | Keyword | Why Complementary |\n|--------------|---------|-------------------|\n| Stainless Steel Water Bottle | bottle cleaning brush | Used to maintain/clean the bottle |\n| Wireless Bluetooth Earbuds | earbud carrying case | Used to store/protect the earbuds |\n| Memory Foam Pillow | silk pillowcase | Used as a cover for the pillow |\n\n### **Negative (N)**\nKeywords that fall into any of the following conditions:\n- **Violates a hard constraint** — incompatible specification makes purchase pointless\n- **Same product type but different primary use** — cannot serve customer's need\n- **Different product type, different use, and not used together** — unrelated\n\n| Example ASIN | Keyword | Why Negative |\n|--------------|---------|--------------|\n| Stainless Steel Water Bottle (32oz) | 64oz water jug | Hard constraint violation (size incompatibility) |\n| Wireless Bluetooth Earbuds | gaming headset with mic | Same category but different primary use (gaming communication vs. music listening) |\n| Memory Foam Pillow | throw pillow | Same product type but different use (decoration vs. sleep support) |\n\n## Examples\n\n### Example 1: RELEVANT (R)\n**Product:** Stainless Steel Water Bottle (32oz)\n**Primary Use:** portable hydration\n**Keyword:** \"insulated water bottle\"\n\n**Reasoning:**\n- Step 1: No hard constraint violation ✓\n- Step 2: Same product type (water bottle) → Step 3a\n- Step 3a: Same primary use (portable hydration) → **R**\n\n---\n\n### Example 2: NEGATIVE - Hard Constraint (N)\n**Product:** Stainless Steel Water Bottle (32oz)\n**Hard Constraints:** [Size: 32oz]\n**Keyword:** \"64oz water jug\"\n\n**Reasoning:**\n- Step 1: Violates hard constraint (64oz ≠ 32oz) → **N**\n\n---\n\n### Example 3: NEGATIVE - Different Use (N)\n**Product:** Memory Foam Pillow\n**Primary Use:** head neck support during sleep\n**Keyword:** \"throw pillow\"\n\n**Reasoning:**\n- Step 1: No hard constraint violation ✓\n- Step 2: Same product type (pillow) → Step 3a\n- Step 3a: Different primary use (decoration vs sleep support) → **N**\n\n---\n\n### Example 4: SUBSTITUTE (S)\n**Product:** Stainless Steel Water Bottle\n**Primary Use:** portable hydration\n**Keyword:** \"plastic tumbler\"\n\n**Reasoning:**\n- Step 1: No hard constraint violation ✓\n- Step 2: Different product type (tumbler ≠ bottle) → Step 3b\n- Step 3b: Same primary use (portable hydration) → **S**\n\n---\n\n### Example 4b: SUBSTITUTE (S)\n**Product:** Wireless Bluetooth Earbuds\n**Primary Use:** personal audio listening\n**Keyword:** \"wired headphones\"\n\n**Reasoning:**\n- Step 1: No hard constraint violation ✓\n- Step 2: Different product type (headphones ≠ earbuds) → Step 3b\n- Step 3b: Same primary use (personal audio listening) → **S**\n\n**Key insight:** Customer wants to listen to audio. Both earbuds and headphones serve that need, making headphones a substitute.\n\n---\n\n### Example 4c: SUBSTITUTE (S)\n**Product:** Memory Foam Pillow\n**Primary Use:** head neck support during sleep\n**Keyword:** \"buckwheat pillow\"\n\n**Reasoning:**\n- Step 1: No hard constraint violation ✓\n- Step 2: Different product type (buckwheat pillow uses different material/construction) → Step 3b\n- Step 3b: Same primary use (head/neck support during sleep) → **S**\n\n**Key insight:** Both products serve the same sleep support purpose, even though they use different materials.\n\n---\n\n### Example 5: COMPLEMENTARY (C)\n**Product:** Wireless Bluetooth Earbuds\n**Primary Use:** personal audio listening\n**Keyword:** \"earbud carrying case\"\n\n**Reasoning:**\n- Step 1: No hard constraint violation ✓\n- Step 2: Different product type (case ≠ earbuds) → Step 3b\n- Step 3b: Different primary use (storage ≠ listening) → Step 4\n- Step 4: Used together (case stores earbuds) → **C**\n\n---\n\n### Example 6: NEGATIVE - Unrelated (N)\n**Product:** Memory Foam Pillow\n**Primary Use:** head neck support during sleep\n**Keyword:** \"desk lamp\"\n\n**Reasoning:**\n- Step 1: No hard constraint violation ✓\n- Step 2: Different product type (lamp ≠ pillow) → Step 3b\n- Step 3b: Different primary use (lighting ≠ sleep support) → Step 4\n- Step 4: Not used together → **N**\n\n## Output Format\n\nReturn a JSON object with structured reasoning at each step:\n\n```json\n{\n  \"step1_hard_constraint\": {\n    \"violated\": false,\n    \"violated_constraint\": null,\n    \"reasoning\": \"Keyword does not specify any conflicting attribute values\"\n  },\n  \"step2_product_type\": {\n    \"same_type\": true,\n    \"keyword_product_type\": \"water bottle\",\n    \"reasoning\": \"Keyword asks for water bottle which matches product taxonomy\"\n  },\n  \"step3_primary_use\": {\n    \"same_use\": true,\n    \"reasoning\": \"Both serve portable hydration purpose\"\n  },\n  \"step4_complementary\": null,\n  \"relevancy\": \"R\",\n  \"confidence\": 0.95\n}\n```\n\n**Notes:**\n- `step4_complementary` is `null` if you reached a classification before Step 4\n- `confidence` is 0.0-1.0 based on how clear the classification is\n- Always fill in reasoning for each step you evaluated",
  "instruction": "You are a product categorization expert tasked with classifying the relevance of a provided keyword to a product based on structured decision rules. Given the fields `keyword`, `asin_data`, and `guidelines`, evaluate the keyword's relationship to the product and produce one of four classifications: Relevant (R), Substitute (S), Complementary (C), or Negative (N). Follow the decision rules strictly and ensure that your classification aligns with the customer needs and products' attributes.",
  "demos": [
    {
      "augmented": true,
      "keyword": "bumble bee transformers toys",
      "relevancy": "R"
    },
    {
      "augmented": true,
      "keyword": "camel back waterbottles",
      "relevancy": "R"
    },
    {
      "augmented": true,
      "keyword": "adhsive phone holder for car",
      "relevancy": "C"
    },
    {
      "augmented": true,
      "keyword": "jbl speaker",
      "relevancy": "S"
    }
  ],
  "input_keys": [
    "keyword",
    "asin_data"
  ],
  "output_keys": [
    "relevancy"
  ]
}